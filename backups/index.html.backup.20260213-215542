<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="icon" href="images/icon.png">
	<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500&display=swap" rel="stylesheet">
	<!--<title>sakura rain</title>-->
	<script type="text/javascript">
		var titlekey1 = "mashiro website";
		var titlekey2 = "çœŸç™½çš„å°ç«™æ­£åœ¨å¼€å‘ä¸­...";
		var flag = 1;
		function titleChange() {
			flag = flag ^ 1
			if (flag == 0) {
				document.title = titlekey1;
			}
			else {
				document.title = titlekey2;
			}
		}
		setInterval(titleChange, 2000);
	</script>
	<style>
		body {
			background-color: #FF69B4;
			font-size: 34px;
			color: #fff;
			text-align: center;
			text-decoration: none;
			display: flex;
			min-height: 100vh;
			margin: 0;
			padding: 0;
		}

		#main {
			flex: 1;
			width: 100%;
		}

		body.scroll-locked {
			overflow: hidden;
		}

		.login-status {
			position: fixed;
			top: 20px;
			right: 20px;
			background-color: rgba(255, 255, 255, 0.25);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 10px 20px;
			font-size: 16px;
			cursor: pointer;
			transition: all 0.3s ease;
			text-decoration: none;
			display: inline-block;
			color: #fff;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.login-status:hover {
			background-color: rgba(255, 255, 255, 0.4);
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
		}

		.profile-link {
			position: fixed;
			top: 80px;
			right: 20px;
			background-color: rgba(255, 255, 255, 0.25);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 10px 20px;
			font-size: 16px;
			cursor: pointer;
			transition: all 0.3s ease;
			text-decoration: none;
			display: inline-block;
			color: #fff;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.profile-link:hover {
			background-color: rgba(255, 255, 255, 0.4);
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
		}

		h3 {
			font-size: 60px;
			color: #fff;
			text-align: center;
			padding-top: 30px;
			font-weight: bold;
			font-style: normal;
			min-height: 80px;
			text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3),
				0 0 10px rgba(255, 255, 255, 0.5),
				0 0 20px rgba(255, 192, 203, 0.3);
		}

		.typing-cursor {
			display: inline-block;
			width: 4px;
			height: 1.1em;
			background-color: #fff;
			margin-left: 3px;
			margin-bottom: 5px;
			animation: cursorBlink 1s step-end infinite;
			vertical-align: text-bottom;
			box-shadow: 0 0 8px rgba(255, 255, 255, 0.8),
				0 0 15px rgba(255, 105, 180, 0.5);
		}

		@keyframes cursorBlink {

			0%,
			100% {
				opacity: 1;
			}

			50% {
				opacity: 0;
			}
		}

		.post-meta {
			text-align: center;
			margin-top: 10px;
			font-size: 18px;
			color: rgba(255, 255, 255, 0.8);
			font-family: Arial, "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
			line-height: 1.6;
		}

		.post-meta a {
			display: inline;
			color: rgba(255, 255, 255, 0.85);
			text-decoration: none;
			margin: 0 5px;
			transition: opacity 0.3s ease;
		}

		.post-meta a:hover {
			opacity: 0.7;
			text-decoration: underline;
		}

		.post-meta span {
			margin: 0 3px;
		}

		#sideBar {
			width: 250px;
			background-color: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(10px);
			padding: 0;
			box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
			transition: width 0.3s ease;
			position: fixed;
			left: 0;
			top: 0;
			height: 100vh;
			overflow-y: auto;
			z-index: 999;
		}

		/* éšè—è¾¹æ æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
		#sideBar::-webkit-scrollbar {
			display: none;
		}

		#sideBar {
			-ms-overflow-style: none;
			scrollbar-width: none;
		}

		#sideBar.collapsed {
			width: 0;
			padding: 0;
			overflow: hidden;
		}

		#sideBarToggle {
			position: fixed;
			left: 0;
			top: 20px;
			width: 40px;
			height: 60px;
			background-color: rgba(255, 255, 255, 0.25);
			backdrop-filter: blur(10px);
			border-radius: 0 10px 10px 0;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 20px;
			color: #fff;
			transition: all 0.3s ease;
			z-index: 1001;
		}

		#sideBarToggle:hover {
			background-color: rgba(255, 255, 255, 0.4);
			width: 45px;
		}

		#sideBarMain {
			padding: 20px;
		}

		.introduce-box {
			background: linear-gradient(135deg, rgba(255, 192, 203, 0.3) 0%, rgba(255, 105, 180, 0.3) 100%);
			padding: 20px;
			text-align: center;
			border-radius: 0 0 15px 15px;
			margin-bottom: 20px;
		}

		.introduce-head {
			margin-bottom: 15px;
		}

		.introduce-via {
			width: 80px;
			height: 80px;
			margin: 0 auto;
			border-radius: 50%;
			overflow: hidden;
			border: 3px solid rgba(255, 255, 255, 0.5);
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.introduce-via img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		#introduce {
			font-size: 14px;
			color: rgba(255, 255, 255, 0.9);
			line-height: 1.8;
		}

		#introduce a {
			color: rgba(255, 255, 255, 0.95);
			text-decoration: none;
			transition: opacity 0.3s ease;
		}

		#introduce a:hover {
			opacity: 0.7;
		}

		.nav-title {
			height: 2px;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
			margin: 15px 0;
		}

		.icon-list ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		.icon-list li {
			margin-bottom: 5px;
		}

		.icon-list a {
			display: flex;
			align-items: center;
			color: rgba(255, 255, 255, 0.9);
			text-decoration: none;
			padding: 12px 15px;
			border-radius: 10px;
			transition: all 0.3s ease;
			font-size: 15px;
			font-family: Arial, "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
		}

		.icon-list a:hover {
			background-color: rgba(255, 255, 255, 0.2);
			transform: translateX(5px);
		}

		.icon-list a i {
			margin-right: 10px;
			font-size: 18px;
		}

		#sideBarMain {
			padding: 20px;
		}

		.catListTitle {
			font-size: 20px;
			color: #fff;
			margin-bottom: 15px;
			padding-bottom: 10px;
			border-bottom: 2px solid rgba(255, 255, 255, 0.3);
		}

		.newsItem,
		.blogStats {
			margin-bottom: 20px;
		}

		#navList {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		#navList li {
			margin-bottom: 10px;
		}

		#navList a {
			display: block;
			color: rgba(255, 255, 255, 0.9);
			text-decoration: none;
			padding: 10px 15px;
			border-radius: 10px;
			transition: all 0.3s ease;
			font-size: 16px;
			font-family: Arial, "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
		}

		#navList a:hover {
			background-color: rgba(255, 255, 255, 0.2);
			transform: translateX(5px);
		}

		.image {
			position: relative;
			display: block;
			width: 960px;
			margin: 30px auto;
		}

		audio {
			display: none;
		}

		/* è‡ªå®šä¹‰éŸ³ä¹æ’­æ”¾å™¨ */
		.music-player {
			margin-top: 40px;
			width: 90%;
			max-width: 650px;
			margin-left: auto;
			margin-right: auto;
			background: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(20px);
			border-radius: 25px;
			padding: 25px 30px;
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
			border: 2px solid rgba(255, 255, 255, 0.2);
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			gap: 25px;
		}

		.music-player:hover {
			transform: translateY(-5px);
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
			border-color: rgba(255, 255, 255, 0.3);
		}

		/* ä¸“è¾‘å°é¢ */
		.album-cover {
			width: 120px;
			height: 120px;
			flex-shrink: 0;
			border-radius: 15px;
			overflow: hidden;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
			background: rgba(255, 255, 255, 0.1);
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.album-cover img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.album-cover .placeholder {
			font-size: 40px;
			color: rgba(255, 255, 255, 0.5);
		}

		/* æ’­æ”¾å™¨å†…å®¹åŒºåŸŸ */
		.player-content {
			flex: 1;
			min-width: 0;
		}

		.music-info {
			text-align: center;
			margin-bottom: 15px;
		}

		.music-title {
			font-size: 18px;
			font-weight: bold;
			color: #fff;
			margin-bottom: 8px;
			text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
			letter-spacing: 1px;
		}

		.music-artist {
			font-size: 14px;
			color: rgba(255, 255, 255, 0.8);
			text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
		}

		.music-progress {
			width: 100%;
			height: 6px;
			background: rgba(255, 255, 255, 0.2);
			border-radius: 3px;
			margin-bottom: 15px;
			cursor: pointer;
			position: relative;
			overflow: hidden;
		}

		.music-progress-bar {
			height: 100%;
			background: linear-gradient(90deg, rgba(255, 182, 193, 0.8), rgba(255, 105, 180, 0.9));
			border-radius: 3px;
			width: 0%;
			transition: width 0.1s linear;
		}

		.music-progress:hover .music-progress-bar {
			background: linear-gradient(90deg, rgba(255, 182, 193, 1), rgba(255, 105, 180, 1));
		}

		.music-time {
			display: flex;
			justify-content: space-between;
			font-size: 12px;
			color: rgba(255, 255, 255, 0.9);
			margin-bottom: 15px;
			font-weight: 300;
		}

		.music-controls {
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 20px;
		}

		.music-btn {
			background: rgba(255, 255, 255, 0.2);
			border: none;
			border-radius: 50%;
			width: 45px;
			height: 45px;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
			backdrop-filter: blur(10px);
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.music-btn:hover {
			background: rgba(255, 255, 255, 0.35);
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
		}

		.music-btn:active {
			transform: scale(0.95);
		}

		.music-btn svg {
			width: 20px;
			height: 20px;
			fill: #fff;
			filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
		}

		.music-btn.play-btn {
			width: 60px;
			height: 60px;
			background: linear-gradient(135deg, rgba(255, 182, 193, 0.5), rgba(255, 105, 180, 0.6));
		}

		.music-btn.play-btn svg {
			width: 26px;
			height: 26px;
		}

		.music-btn.play-btn:hover {
			background: linear-gradient(135deg, rgba(255, 182, 193, 0.7), rgba(255, 105, 180, 0.8));
		}

		.music-playlist {
			text-align: center;
			margin-top: 10px;
			font-size: 12px;
			color: rgba(255, 255, 255, 0.7);
		}

		/* å“åº”å¼è®¾è®¡ - å°å±å¹•æ—¶ä¸“è¾‘å°é¢ç§»åˆ°ä¸Šæ–¹ */
		@media (max-width: 600px) {
			.music-player {
				flex-direction: column;
				max-width: 400px;
			}

			.album-cover {
				width: 100px;
				height: 100px;
			}
		}

		a {
			display: block;
			margin-top: 20px;
		}

		.handwriting {
			font-family: 'Comic Sans MS', 'Zen Maru Gothic', 'Chalkboard SE', sans-serif;
			/*font-family: 'Zen Maru Gothic', sans-serif;*/
		}

		.image img {
			display: block;
			border-radius: 20px;
		}

		.image img:nth-child(2) {
			position: absolute;
			top: 0;
			left: 0;
			opacity: 0;
			transition: opacity 1s ease;
		}

		.image:hover img:nth-child(2) {
			opacity: 1;
		}

		/* å°† Live2D çœ‹æ¿å¨˜ç§»åˆ°å³è¾¹ */
		#waifu {
			left: auto !important;
			right: 0 !important;
		}

		#live2d-widget {
			left: auto !important;
			right: 0 !important;
		}
	</style>
</head>

<body>
	<div id="sideBarToggle">â–¶</div>
	<div id="sideBar" class="collapsed">
		<div id="sideBarMain">
			<div class="introduce-box">
				<div class="introduce-head">
					<div class="introduce-via" id="menuBlogAvatar">
						<img src="images/icon.png" alt="å¤´åƒ">
					</div>
				</div>
				<div id="introduce">
					æ˜µç§°ï¼š<a href="https://github.com/mashiro-01" target="_blank">mashiro</a><br>
					çŠ¶æ€ï¼š<a href="javascript:void(0)">å¼€å‘ä¸­</a><br>
					åŸŸåï¼š<a href="javascript:void(0)">çœŸç™½çš„å°ç«™</a>
				</div>
			</div>
			<div class="nav-title"></div>
			<div class="icon-list">
				<ul id="navList">
					<li><a href="index.html"><i>ğŸ </i>é¦–é¡µ</a></li>
					<li><a href="login.html"><i>ğŸ”‘</i>ç™»å½•</a></li>
					<li><a href="register.html"><i>ğŸ“</i>æ³¨å†Œ</a></li>
					<li><a href="https://github.com/mashiro-01" target="_blank"><i>ğŸ±</i>GitHub</a></li>
				</ul>
			</div>
		</div>
	</div>

	<div id="main">
		<a id="loginStatus" class="login-status" href="login.html">æœªç™»å½•</a>
		<a id="profileLink" class="profile-link" href="profile_cn.html">å‰å¾€å­¦æœ¯ä¸»é¡µ</a>
		<h3 id="typingTitle"></h3>
		<div class="post-meta">
			<span>posted @ </span>
			<span id="post-date">2026-01-19</span>&nbsp;
			<a href="https://github.com/mashiro-01" target="_blank">mashiro</a>&nbsp;
			<span>é˜…è¯»(<span id="post-view-count">0</span>)</span>&nbsp;
			<span>è¯„è®º(<span id="post-comment-count">0</span>)</span>&nbsp;
			<span>ç¼–è¾‘</span>
		</div>
		<p class="handwriting">ä»¥ä¸‹æ­Œæ›²èŠ‚é€‰è‡ªreplay machine</p>
		<p class="handwriting">We know. The time of joy will pass again someday.</p>
		<p class="handwriting">Then, fresh wind blows. It treasures that is happy.</p>
		<p class="handwriting">Too, to be sad, too.</p>
		<p class="handwriting">Let's repeat it eternally, and live, and go!</p>
		<p class="handwriting">Maybe happy...</p>
		<p class="handwriting">ãƒªãƒ—ãƒ¬ã‚¤ãƒã‚·ä¸€ãƒ³ã¿ãŸã„ã« Oh Yeah</p>
		<p class="handwriting">ã„ã¤ã¾ã§ã‚‚ã“ã®æ­Œã ã‘ ãã£ã¨å¿˜ã‚Œãªã„</p>
		<a href="https://toneworks.product.co.jp/ssr" target="_blank">ä½ä»“é›¨éŸ³ssrï¼Œéœ€è¦æŒ‚æ¢¯å­</a>
		<p>å¼€å‘ing</p>
		<!--<img src="ä½ä»“é›¨éŸ³.png" alt="æè¿°æ–‡æœ¬" width="960" height="560" title="rain">-->
		<div class="image">
			<img src="images/21.png" alt="test1" width="960" height="540">
			<img src="images/23.png" alt="test2" width="960" height="540">
		</div>
		<div class="image">
			<img src="images/11.png" alt="test1" width="960" height="540">
			<img src="images/13.png" alt="test2" width="960" height="540">
		</div>

		<!-- éšè—çš„åŸç”ŸéŸ³é¢‘å…ƒç´  -->
		<audio id="audioPlayer" preload="auto"></audio>

		<!-- è‡ªå®šä¹‰éŸ³ä¹æ’­æ”¾å™¨ -->
		<div class="music-player">
			<!-- ä¸“è¾‘å°é¢ -->
			<div class="album-cover" id="albumCover">
				<span class="placeholder">ğŸµ</span>
			</div>

			<!-- æ’­æ”¾å™¨å†…å®¹ -->
			<div class="player-content">
				<div class="music-info">
					<div class="music-title" id="musicTitle">Replay Machine</div>
					<div class="music-artist" id="musicArtist">ä½ä»“é›¨éŸ³</div>
				</div>

				<div class="music-progress" id="progressBar">
					<div class="music-progress-bar" id="progressBarFill"></div>
				</div>

				<div class="music-time">
					<span id="currentTime">0:00</span>
					<span id="totalTime">0:00</span>
				</div>

				<div class="music-controls">
					<button class="music-btn" id="prevBtn" title="ä¸Šä¸€é¦–">
						<svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
					</button>
					<button class="music-btn play-btn" id="playBtn" title="æ’­æ”¾/æš‚åœ">
						<svg id="playIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
						<svg id="pauseIcon" viewBox="0 0 24 24" style="display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
					</button>
					<button class="music-btn" id="nextBtn" title="ä¸‹ä¸€é¦–">
						<svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
					</button>
				</div>

				<div class="music-playlist">
					<span id="playlistInfo">1 / 2</span>
				</div>
			</div>
		</div>

		<a id="downloadLink" href="files/1.rar" download="samuhoshi.rar" style="display: none;">
			ä¸‹è½½é“¾æ¥
		</a>

		<script>
			// éŸ³ä¹æ’­æ”¾å™¨åŠŸèƒ½
			class MusicPlayer {
				constructor() {
					this.audio = document.getElementById('audioPlayer');
					this.playBtn = document.getElementById('playBtn');
					this.prevBtn = document.getElementById('prevBtn');
					this.nextBtn = document.getElementById('nextBtn');
					this.progressBar = document.getElementById('progressBar');
					this.progressBarFill = document.getElementById('progressBarFill');
					this.currentTimeEl = document.getElementById('currentTime');
					this.totalTimeEl = document.getElementById('totalTime');
					this.musicTitle = document.getElementById('musicTitle');
					this.musicArtist = document.getElementById('musicArtist');
					this.playlistInfo = document.getElementById('playlistInfo');
					this.playIcon = document.getElementById('playIcon');
					this.pauseIcon = document.getElementById('pauseIcon');
					this.albumCover = document.getElementById('albumCover');

					// è‡ªåŠ¨æ‰«æaudiosç›®å½•ä¸‹çš„æ‰€æœ‰mp3æ–‡ä»¶
					this.playlist = this.scanMusicFiles();
					this.currentIndex = 0;
					this.isPlaying = false;

					this.init();
				}

				// è‡ªåŠ¨æ‰«æéŸ³ä¹æ–‡ä»¶å¹¶è§£ææ–‡ä»¶å
				scanMusicFiles() {
					// =====================================================
					// éŸ³ä¹æ’­æ”¾åˆ—è¡¨é…ç½®
					// æ·»åŠ æ–°æ­Œæ›²æ—¶ï¼Œåªéœ€åœ¨ä¸‹é¢æ•°ç»„ä¸­æ·»åŠ æ–‡ä»¶è·¯å¾„å³å¯
					// æ”¯æŒçš„æ ¼å¼ï¼šmp3, flac, m4a, ogg, wav, webm
					// æ–‡ä»¶å‘½åæ ¼å¼ï¼š'audios/æ¼”å”±è€…-æ­Œæ›²å.æ‰©å±•å'
					// ç³»ç»Ÿä¼šè‡ªåŠ¨è§£ææ–‡ä»¶åï¼Œæå–æ¼”å”±è€…å’Œæ­Œæ›²ä¿¡æ¯
					// =====================================================
					const musicFiles = [
						'audios/å½©éŸ³ - ã‚ãŒã‚‰ãªã„é›¨ã¯ãªã„ã‚“ã ã‚ˆ.mp3',
						'audios/å½©éŸ³ - ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹.mp3',
						'audios/å¿—å€‰åƒä»£ä¸¸ - ã‚ªãƒ«ã‚³ã‚™ãƒ¼ãƒ«ã¨ãƒ’ã‚šã‚¢ãƒã¨.mp3',
						'audios/å¿—å€‰åƒä»£ä¸¸ - é›¨ã®ã¡æƒ³ã„å‡º.mp3',
						'audios/å¿—å€‰åƒä»£ä¸¸-ãƒªãƒ—ãƒ¬ã‚¤ãƒã‚·ãƒ³.mp3',
						'audios/æ°´æ¨¹å¥ˆã€…-ãƒªãƒ—ãƒ¬ã‚¤ãƒã‚·ãƒ³.mp3'
					];

					// è‡ªåŠ¨è§£ææ‰€æœ‰éŸ³ä¹æ–‡ä»¶çš„æ–‡ä»¶å
					return musicFiles.map(filename => {
						return this.parseFileName(filename);
					});
				}

				// è§£ææ–‡ä»¶åï¼Œæå–æ¼”å”±è€…å’Œæ­Œæ›²å
				parseFileName(filepath) {
					// è·å–æ–‡ä»¶åï¼ˆä¸åŒ…å«è·¯å¾„ï¼‰
					const filename = filepath.split('/').pop();

					// ç§»é™¤æ‰©å±•åï¼ˆæ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼‰
					const nameWithoutExt = filename.replace(/\.(mp3|flac|m4a|ogg|wav|webm)$/i, '');

					// æŒ‰"-"æˆ–" - "åˆ†å‰²ï¼Œå‰é¢æ˜¯æ¼”å”±è€…ï¼Œåé¢æ˜¯æ­Œæ›²å
					const parts = nameWithoutExt.split(/\s*-\s*/);

					if (parts.length >= 2) {
						return {
							title: parts.slice(1).join('-'), // æ­Œæ›²åï¼ˆå…è®¸æ­Œæ›²åä¸­åŒ…å«"-"ï¼‰
							artist: parts[0], // æ¼”å”±è€…
							src: filepath,
							format: filename.split('.').pop().toLowerCase(), // éŸ³é¢‘æ ¼å¼
							// ä¸“è¾‘å°é¢å›¾ç‰‡è·¯å¾„ï¼ˆä¸éŸ³é¢‘æ–‡ä»¶åŒåçš„jpg/pngæ–‡ä»¶ï¼‰
							cover: this.findAlbumCover(filepath)
						};
					} else {
						// å¦‚æœæ–‡ä»¶åä¸ç¬¦åˆæ ¼å¼ï¼Œä½¿ç”¨æ•´ä¸ªæ–‡ä»¶åä½œä¸ºæ ‡é¢˜
						return {
							title: nameWithoutExt,
							artist: 'æœªçŸ¥è‰ºæœ¯å®¶',
							src: filepath,
							format: filename.split('.').pop().toLowerCase(), // éŸ³é¢‘æ ¼å¼
							cover: this.findAlbumCover(filepath)
						};
					}
				}

				// æŸ¥æ‰¾ä¸“è¾‘å°é¢å›¾ç‰‡
				findAlbumCover(audioPath) {
					// è·å–éŸ³é¢‘æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼Œæ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼‰
					const audioFile = audioPath.split('/').pop().replace(/\.(mp3|flac|m4a|ogg|wav|webm)$/i, '');

					// å¯èƒ½çš„å›¾ç‰‡æ ¼å¼
					const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp'];

					// å°è¯•æŸ¥æ‰¾ä¸éŸ³é¢‘æ–‡ä»¶åŒåçš„å›¾ç‰‡
					for (const ext of imageExtensions) {
						const imagePath = `audios/${audioFile}.${ext}`;
						// è¿™é‡Œæˆ‘ä»¬è¿”å›è·¯å¾„ï¼Œå®é™…åŠ è½½æ—¶ä¼šå°è¯•åŠ è½½
						// å¦‚æœå›¾ç‰‡ä¸å­˜åœ¨ï¼Œä¼šæ˜¾ç¤ºå ä½ç¬¦
						return imagePath;
					}

					return null;
				}

				// æ›´æ–°ä¸“è¾‘å°é¢
				updateAlbumCover(song) {
					if (song.cover) {
						// å°è¯•åŠ è½½å°é¢å›¾ç‰‡
						const img = new Image();
						img.onload = () => {
							this.albumCover.innerHTML = `<img src="${song.cover}" alt="ä¸“è¾‘å°é¢">`;
						};
						img.onerror = () => {
							// å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºå ä½ç¬¦
							this.albumCover.innerHTML = '<span class="placeholder">ğŸµ</span>';
						};
						img.src = song.cover;
					} else {
						this.albumCover.innerHTML = '<span class="placeholder">ğŸµ</span>';
					}
				}

				init() {
					this.loadSong(this.currentIndex);
					this.addEventListeners();
				}

				loadSong(index) {
					const song = this.playlist[index];
					this.audio.src = song.src;
					this.musicTitle.textContent = song.title;
					this.musicArtist.textContent = song.artist;
					this.playlistInfo.textContent = `${index + 1} / ${this.playlist.length}`;

					// æ›´æ–°ä¸“è¾‘å°é¢
					this.updateAlbumCover(song);

					// é‡ç½®è¿›åº¦
					this.progressBarFill.style.width = '0%';
					this.currentTimeEl.textContent = '0:00';
				}

				play() {
					this.audio.play();
					this.isPlaying = true;
					this.playIcon.style.display = 'none';
					this.pauseIcon.style.display = 'block';
				}

				pause() {
					this.audio.pause();
					this.isPlaying = false;
					this.playIcon.style.display = 'block';
					this.pauseIcon.style.display = 'none';
				}

				togglePlay() {
					if (this.isPlaying) {
						this.pause();
					} else {
						this.play();
					}
				}

				prevSong() {
					this.currentIndex--;
					if (this.currentIndex < 0) {
						this.currentIndex = this.playlist.length - 1;
					}
					this.loadSong(this.currentIndex);
					if (this.isPlaying) {
						this.play();
					}
				}

				nextSong() {
					this.currentIndex++;
					if (this.currentIndex >= this.playlist.length) {
						this.currentIndex = 0;
					}
					this.loadSong(this.currentIndex);
					if (this.isPlaying) {
						this.play();
					}
				}

				updateProgress() {
					const { duration, currentTime } = this.audio;
					if (isNaN(duration)) return;

					const progressPercent = (currentTime / duration) * 100;
					this.progressBarFill.style.width = `${progressPercent}%`;

					// æ›´æ–°æ—¶é—´æ˜¾ç¤º
					this.currentTimeEl.textContent = this.formatTime(currentTime);
					this.totalTimeEl.textContent = this.formatTime(duration);
				}

				setProgress(e) {
					const width = this.progressBar.clientWidth;
					const clickX = e.offsetX;
					const duration = this.audio.duration;

					if (isNaN(duration)) return;

					this.audio.currentTime = (clickX / width) * duration;
				}

				formatTime(seconds) {
					const mins = Math.floor(seconds / 60);
					const secs = Math.floor(seconds % 60);
					return `${mins}:${secs.toString().padStart(2, '0')}`;
				}

				addEventListeners() {
					this.playBtn.addEventListener('click', () => this.togglePlay());
					this.prevBtn.addEventListener('click', () => this.prevSong());
					this.nextBtn.addEventListener('click', () => this.nextSong());

					this.audio.addEventListener('timeupdate', () => this.updateProgress());
					this.audio.addEventListener('ended', () => this.nextSong());
					this.audio.addEventListener('loadedmetadata', () => {
						this.totalTimeEl.textContent = this.formatTime(this.audio.duration);
					});

					this.progressBar.addEventListener('click', (e) => this.setProgress(e));
				}
			}

			// æ‰“å­—æœºæ•ˆæœ - æ”¹è¿›ç‰ˆ
			class Typewriter {
				constructor(elementId, text, speed = 150) {
					this.element = document.getElementById(elementId);
					this.text = text;
					this.speed = speed;
					this.index = 0;
					this.cursorElement = null;
					this.isTyping = false;
				}

				start() {
					if (!this.isTyping) {
						this.isTyping = true;
						this.element.innerHTML = '';
						this.createCursor();
						this.type();
					}
				}

				createCursor() {
					this.cursorElement = document.createElement('span');
					this.cursorElement.className = 'typing-cursor';
					this.cursorElement.innerHTML = '&nbsp;';
					this.element.appendChild(this.cursorElement);
				}

				type() {
					if (this.index < this.text.length) {
						// åœ¨å…‰æ ‡å‰æ’å…¥å­—ç¬¦
						const char = document.createTextNode(this.text.charAt(this.index));
						this.element.insertBefore(char, this.cursorElement);
						this.index++;
						setTimeout(() => this.type(), this.speed);
					}
				}
			}

			// æ£€æŸ¥ç™»å½•çŠ¶æ€å¹¶æ›´æ–°æ˜¾ç¤º
			function updateLoginStatus() {
				const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
				const username = localStorage.getItem('username');
				const loginStatusEl = document.getElementById('loginStatus');
				const downloadLinkEl = document.getElementById('downloadLink');

				if (isLoggedIn && username) {
					loginStatusEl.textContent = 'ç”¨æˆ·: ' + username;
					loginStatusEl.href = 'javascript:void(0)';
					loginStatusEl.onclick = function () {
						if (confirm('æ˜¯å¦é€€å‡ºç™»å½•ï¼Ÿ')) {
							localStorage.removeItem('isLoggedIn');
							localStorage.removeItem('username');
							// é‡æ–°åŠ è½½é¡µé¢
							window.location.reload();
						}
					};
					// æ˜¾ç¤ºä¸‹è½½é“¾æ¥
					if (downloadLinkEl) {
						downloadLinkEl.style.display = 'block';
					}
				} else {
					loginStatusEl.textContent = 'æœªç™»å½•';
					loginStatusEl.href = 'login.html';
					loginStatusEl.onclick = null;
					// éšè—ä¸‹è½½é“¾æ¥
					if (downloadLinkEl) {
						downloadLinkEl.style.display = 'none';
					}
				}
			}

			// é¡µé¢åŠ è½½æ—¶æ›´æ–°ç™»å½•çŠ¶æ€
			window.onload = function () {
				updateLoginStatus();

				// æ›´æ–°å‘å¸ƒæ—¥æœŸ
				updatePostDate();

				// å¯åŠ¨æ‰“å­—æœºæ•ˆæœ
				const typewriter = new Typewriter('typingTitle', 'è¿™é‡Œæ˜¯çœŸç™½çš„å°ç«™ï¼Œç½‘ç«™æ­£åœ¨å¼€å‘ä¸­', 150);
				typewriter.start();

				// åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
				const musicPlayer = new MusicPlayer();

				// ä¾§è¾¹æ åˆ‡æ¢åŠŸèƒ½
				const sideBar = document.getElementById('sideBar');
				const sideBarToggle = document.getElementById('sideBarToggle');

				// åˆ‡æ¢è¾¹æ çŠ¶æ€çš„å‡½æ•°
				function toggleSidebar() {
					sideBar.classList.toggle('collapsed');
					if (sideBar.classList.contains('collapsed')) {
						sideBarToggle.textContent = 'â–¶';
						// æ¢å¤ body æ»šåŠ¨
						document.body.classList.remove('scroll-locked');
					} else {
						sideBarToggle.textContent = 'â—€';
						// ç¦ç”¨ body æ»šåŠ¨
						document.body.classList.add('scroll-locked');
						// é‡ç½®è¾¹æ æ»šåŠ¨ä½ç½®åˆ°é¡¶éƒ¨
						sideBar.scrollTop = 0;
					}
				}

				sideBarToggle.addEventListener('click', function (e) {
					e.stopPropagation();
					toggleSidebar();
				});

				// ç‚¹å‡»è¾¹æ å¤–éƒ¨åŒºåŸŸæ—¶æ”¶ç¼©è¾¹æ 
				document.addEventListener('click', function (e) {
					// å¦‚æœè¾¹æ æ˜¯å±•å¼€çŠ¶æ€ï¼Œä¸”ç‚¹å‡»çš„ä¸æ˜¯è¾¹æ å†…éƒ¨å’Œåˆ‡æ¢æŒ‰é’®
					if (!sideBar.classList.contains('collapsed') &&
						!sideBar.contains(e.target) &&
						!sideBarToggle.contains(e.target)) {
						toggleSidebar();
					}
				});

				// é˜»æ­¢ç‚¹å‡»è¾¹æ å†…éƒ¨æ—¶å†’æ³¡åˆ° document
				sideBar.addEventListener('click', function (e) {
					e.stopPropagation();
				});
			};

			// æ›´æ–°å‘å¸ƒæ—¥æœŸä¸ºå½“å‰æ—¥æœŸ
			function updatePostDate() {
				const now = new Date();
				const year = now.getFullYear();
				const month = String(now.getMonth() + 1).padStart(2, '0');
				const day = String(now.getDate()).padStart(2, '0');
				const hours = String(now.getHours()).padStart(2, '0');
				const minutes = String(now.getMinutes()).padStart(2, '0');

				const dateStr = `${year}-${month}-${day} ${hours}:${minutes}`;
				document.getElementById('post-date').textContent = dateStr;

				// ä» localStorage è·å–æˆ–åˆå§‹åŒ–é˜…è¯»æ•°
				let viewCount = localStorage.getItem('viewCount') || Math.floor(Math.random() * 100) + 50;
				viewCount = parseInt(viewCount) + 1;
				localStorage.setItem('viewCount', viewCount);
				document.getElementById('post-view-count').textContent = viewCount;

				// è®¡ç®—æ€»å­—æ•°ï¼ˆä¸­æ–‡å­—ç¬¦ + è‹±æ–‡å•è¯ï¼‰
				const content = document.querySelector('.handwriting')?.textContent || '';
				const chineseChars = content.match(/[\u4e00-\u9fa5]/g) || [];
				const englishWords = content.match(/[a-zA-Z]+/g) || [];
				const totalCount = chineseChars.length + englishWords.length;

				// è¯„è®ºæ•°ï¼ˆå¯ä»¥åç»­æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼‰
				document.getElementById('post-comment-count').textContent = '0';
			}
		</script>

		<!-- Live2D çœ‹æ¿å¨˜ -->
		<script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
	</div>
</body>

</html>