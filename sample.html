<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="origin-when-cross-origin" />
    <meta name="keywords" content="Linux,泰山派Ubuntu,ARM内核,Linux驱动,Linux应用" />
    <meta name="description"
        content="编写一个Buildroot 内核驱动 PS:内核驱动只能在/kernel/drivers/目录下 Makefile文件的编写 主要注意Makefile文件的编写（路径，包含） 在该路径下先新建一个用户内核驱动文件夹，用于存放用户编写的驱动 user_rk3566_-kernel-driver 进入该" />
    <meta property="og:description"
        content="编写一个Buildroot 内核驱动 PS:内核驱动只能在/kernel/drivers/目录下 Makefile文件的编写 主要注意Makefile文件的编写（路径，包含） 在该路径下先新建一个用户内核驱动文件夹，用于存放用户编写的驱动 user_rk3566_-kernel-driver 进入该" />
    <meta property="og:image"
        content="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173751023-892940144.png" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>编写一个Buildroot 内核驱动 - 沁拒离 - 博客园</title>
    <link rel="icon" id="favicon" href="https://assets.cnblogs.com/favicon_v3_2.ico" type="image/x-icon" />
    <link rel="canonical" href="https://www.cnblogs.com/tianwuyvlianshui/p/19498842" />

    <link rel="stylesheet" href="/css/blog-common.min.css?v=R-rVrNMCww2yul5xXUhO700E4bdSawv9GWDBDURYdKA" />



    <link id="highlighter-theme-cnblogs" type="text/css" rel="stylesheet"
        href="/css/hljs/cnblogs.css?v=5J1NDtbnnIr2Rc2SdhEMlMxD4l9Eydj88B31E7_NhS4" />
    <link type="text/css" rel="stylesheet"
        href="https://www.cnblogs.com/tianwuyvlianshui/custom.css?v=&#x2B;ED3s0TWAaUcCz05nq3tqnYhUr0=" />

    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet"
        href="/skins/SimpleMemory/bundle-simplememory-mobile-pure.min.css?v=a5tjm35tHR3Bq88JZf8V-jiXDhgs5wg823qWgRI6uRY" />

    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/tianwuyvlianshui/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/tianwuyvlianshui/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest"
        href="https://www.cnblogs.com/tianwuyvlianshui/wlwmanifest.xml" />

    <script type="application/ld&#x2B;json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "@id": "https://www.cnblogs.com/tianwuyvlianshui/p/19498842",
      "headline": "编写一个Buildroot 内核驱动",
      "description": "编写一个Buildroot 内核驱动 PS:内核驱动只能在/kernel/drivers/目录下 Makefile文件的编写 主要注意Makefile文件的编写（路径，包含） 在该路径下先新建一个用户内核驱动文件夹，用于存放用户编写的驱动 user_rk3566_-kernel-driver 进入该",
      "image": [
        
      ],
      "author": {
        "@type": "Person",
        "@id": "https://www.cnblogs.com/tianwuyvlianshui/",
        "name": "沁拒离",
        "url": "https://www.cnblogs.com/tianwuyvlianshui/"
      },
      "publisher": {
        "@type": "Organization",
        "@id": "https://www.cnblogs.com/",
        "name": "博客园",
        "url": "https://www.cnblogs.com/"
      },
      "datePublished": "2026-01-18T17:41:00.0000000&#x2B;08:00",
      "dateModified": "2026-01-18T17:41:00.0000000&#x2B;08:00",
      "wordCount": "2998",
      "isPartOf": {
        "@type": "Blog",
        "@id": "https://www.cnblogs.com/tianwuyvlianshui/",
        "name": "天雾雨涟水",
        "publisher": {
          "@type": "Organization",
          "@id": "https://www.cnblogs.com/",
          "name": "博客园"
        }
      }
    }
    </script>

    <script>
        var currentBlogId = 835903;
        var currentBlogApp = 'tianwuyvlianshui';
        var isLogined = false;
        var isBlogOwner = false;
        window.skinName = 'SimpleMemory';
        var visitorUserId = '';
        window.hasCustomScript = true;
        window.cb_enable_mathjax = false;
        window.mathEngine = 1;
        window.codeHighlightEngine = 1;
        window.enableCodeLineNumber = false;
        window.codeHighlightTheme = 'cnblogs';
        window.darkModeCodeHighlightTheme = 'vs2015';
        window.isDarkCodeHighlightTheme = false;
        window.isDarkModeCodeHighlightThemeDark = true;
        window.isDisableCodeHighlighter = false;
        window.enableCodeThemeTypeFollowSystem = false;
        window.enableMacStyleCodeBlock = false;

    </script>
    <script>
        window.currentPostId = 19498842;
        window.currentPostDateAdded = '2026-01-18 17:41';
    </script>
    <script src="https://assets.cnblogs.com/scripts/jquery-3.3.1.min.js"></script>
    <script
        src="https://cdn-www.cnblogs.com/js/blog-common.min.js?v=eprNvgBWxBTIe3qH2uqBMB5tIK7skLwdz9CR-FD69Ww"></script>
    <script>updateCustomBlogReferrer();</script>

</head>

<body class="skin-simplememory no-navbar">
    <a name="top"></a>
    <div id="top_nav" class="navbar forpc navbar-custom">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding">
                    <a href="https://www.cnblogs.com/" title="开发者的网上家园" role="banner">
                        <img src="//assets.cnblogs.com/logo.svg" alt="博客园logo" />
                    </a>
                </li>
                <li><a href="https://cnblogs.vip/">会员</a></li>
                <li><a href="https://cnblogs.vip/store">周边</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-news')">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-q')">博问</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="countClicks('nav', 'skin-navbar-ing')">闪存</a></li>
                <li><a href="https://www.cnblogs.com/cmt/p/18500368">众包</a></li>
                <li><a href="https://www.cnblogs.com/cmt/p/19316348">赞助商</a></li>
                <li><a href="https://chat2db-ai.com/" target="_blank"
                        onclick="countClicks('nav', 'skin-navbar-chat2db')">Chat2DB</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search dropdown" action="https://zzk.cnblogs.com/s" method="get"
                        role="search">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="search" tabindex="3"
                            autocomplete="off" />
                        <button id="zzk_search_button" onclick="window.navbarSearchManager.triggerActiveOption()">
                            <img id="search_icon" class="focus-hidden" src="//assets.cnblogs.com/icons/search.svg"
                                alt="搜索" />
                            <img class="hidden focus-visible" src="//assets.cnblogs.com/icons/enter.svg" alt="搜索" />
                        </button>
                        <ul id="navbar_search_options" class="dropdown-menu quick-search-menu">
                            <li tabindex="0" class="active"
                                onclick="zzkSearch(event, document.getElementById('zzk_search_input').value)">
                                <div class="keyword-wrapper">
                                    <img src="//assets.cnblogs.com/icons/search.svg" alt="搜索" />
                                    <div class="keyword"></div>
                                </div>
                                <span class="search-area">所有博客</span>
                            </li>
                            <li tabindex="1"
                                onclick="zzkBlogSearch(event, 'tianwuyvlianshui', document.getElementById('zzk_search_input').value)">
                                <div class="keyword-wrapper">
                                    <img src="//assets.cnblogs.com/icons/search.svg" alt="搜索" />
                                    <div class="keyword"></div>
                                </div>
                                <span class="search-area">当前博客</span>
                            </li>
                        </ul>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a class="navbar-user-info navbar-blog" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔"
                        title="写随笔">
                        <img id="new_post_icon" class="navbar-icon" src="//assets.cnblogs.com/icons/newpost.svg"
                            alt="写随笔" />
                    </a>
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog"
                        href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客">
                        <img id="myblog_icon" class="navbar-icon" src="//assets.cnblogs.com/icons/myblog.svg"
                            alt="我的博客" />
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/"
                        alt="短消息" title="短消息">
                        <img id="msg_icon" class="navbar-icon" src="//assets.cnblogs.com/icons/message.svg" alt="短消息" />
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <a id="navbar_lite_mode_indicator" data-current-page="blog" style="display: none"
                        href="javascript:void(0)" alt="简洁模式" title="简洁模式启用，您在访问他人博客时会使用简洁款皮肤展示">
                        <img class="navbar-icon" src="//assets.cnblogs.com/icons/lite-mode-on.svg" alt="简洁模式" />
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar"
                                src="//assets.cnblogs.com/icons/avatar-default.svg" alt="用户头像" />
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text"
                                href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="https://vip.cnblogs.com/my">会员中心</a>
                            <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
                                简洁模式 <span id="navbar_lite_mode_spinner" class="hide">...</span>
                            </a>

                            <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    <div id="page_begin_html">
        <!-- 右上角github -->
        <!-- <div>
  <a rel="nofollow noopener" 
    href="https://github.com/jianzhiji"
    target="_blank"
    style="position: absolute; right: 0; top: 0; z-index: 100"
  >
    <img
      src="https://images.cnblogs.com/cnblogs_com/blogs/835903/galleries/2433680/o_241205014214_%E5%9B%BE%E5%B1%822.png"
      alt="Fork me on github"
    />
  </a>
</div> -->

        <div class="sticky" style="background-color: rgb(193, 230, 198)">
            <a rel="nofollow noopener" href="#signature" title="置底"><i class="fa fa-arrow-down toBottom"></i></a>
        </div>

        <script language="javascript" type="text/javascript">
            jQuery(document).on("copy", function (e) {
                var selected = window.getSelection();
                var copyFooter =
                    "<br>---------------------<br>著作权归作者所有。<br>" +
                    "商业转载请联系作者获得授权，非商业转载请注明出处（禁止转载CSDN！！！）。<br>" +
                    "作者：天雾雨涟水<br> 源地址：" +
                    document.location.href +
                    "<br>来源：博客园cnblogs<br>© 版权声明：本文为博主原创文章，转载请附上博文链接！";
                var copyHolder = $("<div>", {
                    html: selected + copyFooter,
                    style: { position: "absolute", left: "-99999px" },
                });

                $("body").append(copyHolder);
                selected.selectAllChildren(copyHolder[0]);
                window.setTimeout(function () {
                    copyHolder.remove();
                }, 0);
            });
        </script>

    </div>

    <div id="home">
        <div id="header">
            <div id="blogTitle">
                <a id="lnkBlogLogo" href="https://www.cnblogs.com/tianwuyvlianshui/"><img id="blogLogo"
                        src="/skins/custom/images/logo.gif" alt="返回主页" /></a>


                <h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle"
                        href="https://www.cnblogs.com/tianwuyvlianshui">天雾雨涟水</a>
                </h1>
                <h2>口中描绘的波澜壮阔，远及不上当时设身处地，回想过完坎坷，不若释然，即以此身重溯，终不似少年游。</h2>





            </div>
            <div id="navigator">

                <ul id="navList">
                    <li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
                            博客园</a>
                    </li>
                    <li>
                        <a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/tianwuyvlianshui/">
                            首页</a>
                    </li>
                    <li>

                        <a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
                            新随笔</a>
                    </li>
                    <li>
                        <a id="blog_nav_contact" class="menu"
                            href="https://msg.cnblogs.com/send/%E6%B2%81%E6%8B%92%E7%A6%BB">
                            联系</a>
                    </li>
                    <li>
                        <a id="blog_nav_rss" class="menu" href="javascript:void(0)"
                            data-rss="https://www.cnblogs.com/tianwuyvlianshui/rss/">
                            订阅</a>
                        <!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>-->
                    </li>
                    <li>
                        <a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
                            管理</a>
                    </li>
                </ul>


                <div class="blogStats">
                    <div id="blog_stats_place_holder">
                        <script>loadBlogStats();</script>
                    </div>
                </div>
            </div>
        </div>
        <div id="main">
            <div id="mainContent">
                <div class="forFlow">
                    <div id="post_detail">

                        <div id="topics">
                            <div class="post">
                                <h1 class="postTitle">
                                    <a id="cb_post_title_url" class="postTitle2 vertical-middle"
                                        href="https://www.cnblogs.com/tianwuyvlianshui/p/19498842"
                                        title="发布于 2026-01-18 17:40">
                                        <span role="heading" aria-level="2">编写一个Buildroot 内核驱动</span>


                                    </a>

                                </h1>
                                <div class="clear"></div>
                                <div class="postBody">
                                    <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
                                        <h1 id="编写一个buildroot-内核驱动">编写一个Buildroot 内核驱动</h1>
                                        <blockquote>
                                            <p>PS:内核驱动只能在<strong>/kernel/drivers/</strong>目录下</p>
                                        </blockquote>
                                        <p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173751023-892940144.png"
                                                alt="image-20260117082757215" loading="lazy"></p>
                                        <h2 id="makefile文件的编写">Makefile文件的编写</h2>
                                        <blockquote>
                                            <p>主要注意Makefile文件的编写（路径，包含）</p>
                                            <p>在该路径下先新建一个用户内核驱动文件夹，用于存放用户编写的驱动</p>
                                            <p><strong>user_rk3566_-kernel-driver</strong></p>
                                            <p>进入该文件夹，新建一个02序号用户驱动文件夹，用于存放02驱动</p>
                                            <p><strong>02_kernel_helloworld</strong></p>
                                            <p>编写kernel/drivers/user_rk3566_-kernel-driver/02_kernel_helloworld路径下的Makefile（添加驱动源文件<strong>02_kernel_helloworld.c</strong>进编译）
                                            </p>
                                            <pre><code>vim Makefile
</code></pre>
                                            <p>Makefile：</p>
                                            <pre><code>#obj-y :内核驱动
#obj-m :模块驱动
obj-y += 02_hello_world.o
</code></pre>
                                            <p>返回到<strong>kernel/drivers/user_rk3566_-kernel-driver</strong>路径，添加Makefile（添加驱动源文件的文件夹<strong>02_kernel_helloworld/</strong>进编译）
                                            </p>
                                            <p>Makefile：</p>
                                            <pre><code>#添加驱动文件所在文件夹进编译，需要带“/”符号，表示目录（文件夹）
obj-y += 02_kernel_helloworld/
</code></pre>
                                            <p>返回到<strong>kernel/drivers</strong>路径，添加Makefile（添加驱动源文件的文件夹user_rk3566_-kernel-driver/进编译）
                                            </p>
                                            <p>Makefile：</p>
                                            <pre><code>obj-y +=/user_rk3566_-kernel-driver/
</code></pre>
                                            <p>随便找个地方，把文件夹路径丢进去</p>
                                        </blockquote>
                                        <img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173754308-308553245.png"
                                            alt="image-20260118171936747" style="zoom: 33%">
                                        <blockquote>
                                            <p>OK,由于SDK路径的Makefile文件已经将kernel/drivers路径添加，我们就不需要自己手动添加</p>
                                            <p>以上就是所需要添加的Makefile文件。</p>
                                            <p>主要目的是告诉make工具在<strong>kernel/drivers/user_rk3566_-kernel-driver/02_kernel_helloworld</strong>路径下是我们的驱动源代码<strong>02_kernel_helloworld.c</strong>，需要添加进编译
                                            </p>
                                        </blockquote>
                                        <h2 id="驱动文件编写">驱动文件编写</h2>
                                        <blockquote>
                                            <p>进入该02_kernel_helloworld，开始驱动编写</p>
                                            <pre><code>vim 02_hello_world.c 
</code></pre>
                                            <p>02_hello_world.c</p>
                                            <pre><code class="language-c">#include &lt;linux/module.h&gt;     /* 模块相关宏和函数 */
#include &lt;linux/kernel.h&gt;     /* printk日志函数 */

/* 加载函数（驱动入口），当驱动被 insmod 加载时自动执行 */
static int __init helloworld_init(void)
{
    printk("02_helloworld_init\r\n"); // 内核日志打印
    return 0; // 返回0代表加载成功
}

/* 卸载函数（驱动出口），当驱动被 rmmod 卸载时自动执行 */
static void __exit helloworld_exit(void)
{
    printk("02_helloworld_exit\r\n");
}

/* 下面这两行，告诉内核入口和出口分别是哪两个函数 */
module_init(helloworld_init);
module_exit(helloworld_exit);

/* 这3个是模块信息声明 */
MODULE_LICENSE("GPL v2");               /* 模块许可证 */

</code></pre>
                                        </blockquote>
                                        <h2 id="编译">编译</h2>
                                        <p>我们需要返回到kernel内核文件夹的上一个路径</p>
                                        <p>在我这是SDK/，这里包含了编译脚本，须在这里运行编译命令</p>
                                        <pre><code>./build.sh kernel
</code></pre>
                                        <p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173751745-1600325666.png"
                                                alt="image-20260118172404378" loading="lazy"></p>
                                        <p>编译成功</p>
                                        <p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173752421-1683639729.png"
                                                alt="image-20260118172442489" loading="lazy"></p>
                                        <p>返回源代码路径查看编译文件（可选）</p>
                                        <p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173752940-2085711302.png"
                                                alt="image-20260118163216910" loading="lazy"></p>
                                        <p>可以看到，内核驱动编译后，不会像模块驱动那样生成<strong>.ko</strong>文件</p>
                                        <p>实际，驱动相关的内容已经编译进内核镜像中（root.img）</p>
                                        <p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173753283-1927509773.png"
                                                alt="image-20260118172723586" loading="lazy"></p>
                                        <h2 id="运行">运行</h2>
                                        <p>将该镜像烧录，等板子运行后查看日志</p>
                                        <pre><code>dmesg | grep -E hello
</code></pre>
                                        <p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173753691-118600053.png"
                                                alt="image-20260118173111518" loading="lazy"></p>
                                        <p>可以看到驱动上电后自动运行，这就是和模块驱动的一个显著区别，不需要手动挂载</p>
                                        <p>修改完后，git提交一下代码更改（可选）</p>
                                        <pre><code>git add .
git commit -m"修改说明"
git pull
git push
</code></pre>

                                    </div>
                                    <div class="clear"></div>
                                    <div id="blog_post_info_block" role="contentinfo" class="post-meta-container">
                                        <div id="blog_post_info"></div>
                                        <div class="clear"></div>
                                        <div id="post_next_prev"></div>
                                    </div>
                                </div>
                                <div class="postDesc">posted @
                                    <span id="post-date" data-last-update-days="0"
                                        data-date-updated="2026-01-18 17:41">2026-01-18 17:40</span>&nbsp;
                                    <a href="https://www.cnblogs.com/tianwuyvlianshui">沁拒离</a>&nbsp;
                                    阅读(<span id="post_view_count">44</span>)&nbsp;
                                    评论(<span id="post_comment_count">0</span>)&nbsp;
                                    &nbsp;
                                    <a href="javascript:void(0)" onclick="AddToWz(19498842);return false;">收藏</a>&nbsp;
                                    <a href="javascript:void(0)"
                                        onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19498842', targetLink: 'https://www.cnblogs.com/tianwuyvlianshui/p/19498842', title: '编写一个Buildroot 内核驱动' })">举报</a>
                                </div>
                            </div>


                        </div><!--end: topics 文章、评论容器-->
                    </div>
                    <script>
                        var cb_entryId = 19498842, cb_entryCreatedDate = '2026-01-18 17:40', cb_postType = 1, cb_postTitle = '编写一个Buildroot 内核驱动';
                        var allowComments = true, cb_blogId = 835903, cb_blogApp = 'tianwuyvlianshui', cb_blogUserGuid = '787cb8fa-252b-4bb6-3c96-08dbb65c7020';
                        mermaidRender.render()
                        markdown_highlight()
                        zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");    
                    </script>
                    <a id="!comments"></a>
                    <div id="blog-comments-placeholder"></div>
                    <div id="comment_form" class="commentform">
                        <a name="commentform"></a>
                        <div id="divCommentShow"></div>
                        <div id="comment_nav">
                            <div class="comment-nav-right">
                                <span id="span_refresh_tips"></span><a href="#"
                                    onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a>
                            </div>
                        </div>
                        <div id="comment_form_container"></div>
                        <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
                        <div id="cnblogs_ch"></div>
                        <div id="opt_under_post"></div>
                        <div id="blog_c1" class="under-post-card below-post-card">
                            <a href="https://ais.cn/u/VZZZJj" rel="nofollow" target="_blank"
                                onclick="countCreativeClicks('C1-艾思科蓝')">
                                <img src="https://img2024.cnblogs.com/blog/35695/202512/35695-20251205182619157-1150461542.webp"
                                    onload="countCreativeImpressions('C1-艾思科蓝')" alt=""
                                    style="width:300px!important;height:250px!important;min-width:300px!important;max-width:300px!important;" />
                                <span id="c1_impression" style="display:none"></span>
                            </a>
                        </div>
                        <div id="under_post_card1"></div>
                        <div id="related_posts_card"></div>
                        <div id="under_post_card2"></div>
                        <div id="HistoryToday" class="under-post-card below-post-card"></div>
                        <script type="text/javascript">
                            var commentManager = new blogCommentManager();
                            commentManager.renderComments(0);
                            fixPostBody();
                            window.footnoteTipManager.generateFootnoteTips();

                            window.tocManager.displayDisableTocTips = false;
                            window.tocManager.generateToc();

                            setTimeout(function () { countViews(cb_blogId, cb_entryId); }, 50);

                            deliverT2();
                            deliverC1C2();
                            loadNewsAndKb();

                            LoadPostCategoriesTags(cb_blogId, cb_entryId);

                            LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
                            GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
                            loadOptUnderPost();
                            GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
                        </script>
                    </div>

                </div>
            </div>
            <div id="sideBar">
                <div id="sideBarMain">
                    <div id="sidebar_news" class="newsItem">
                        <h3 class="catListTitle">公告</h3>
                        <div id="blog-news" class="sidebar-news">
                            <div id="sidebar_news_container">
                            </div>
                        </div>
                        <script>loadBlogNews();</script>


                    </div>
                    <div id="blog-calendar" style="display:none"></div>
                    <script>loadBlogDefaultCalendar();</script>
                    <div id="leftcontentcontainer">
                        <div id="blog-sidecolumn"></div>
                        <script>loadBlogSideColumn()</script>
                    </div>
                </div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <div id="footer">
            <a href="https://www.cnblogs.com/" id="footer_site_link" class="footer-brand">博客园</a>
            <span class="footer-copyright"> &nbsp;&copy;&nbsp; 2004-2026</span>
            <br /><span class="footer-icp">
                <a target="_blank"
                    href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602011771"><img
                        src="//assets.cnblogs.com/images/ghs.png" />浙公网安备 33010602011771号</a>
                <a href="https://beian.miit.gov.cn" target="_blank">浙ICP备2021040463号-3</a>
            </span>



        </div>
    </div>



    <div id="page_end_html">
        <div id="bottomProgressBar"></div>
        <link rel="stylesheet" href="https://cdn.cnblogs.com/npm/aplayer@1.10.0/dist/APlayer.min.css">
        <div id="aplayer" class="aplayer" data-id="316722029" data-lrctype="0" data-server="netease"
            data-type="playlist" data-fixed="true" data-listfolded="true"></div>
        <div id="rightMenu"></div>
        <script type="text/javascript">
            /* 鼠标特效 */
            var a_idx = 0;
            jQuery(document).ready(function ($) {
                $("body").click(function (e) {
                    var a = new Array("*埋头写博*", "*皱眉打码*", "*抬头舒眉*", "*斗气化码*");
                    var $i = $("<span></span>").text(a[a_idx]);
                    a_idx = (a_idx + 1) % a.length;
                    var x = e.pageX,
                        y = e.pageY;
                    $i.css({
                        "z-index": 999999999999999999999999999999999999999999999999999999999999999999999,
                        "top": y - 20,
                        "left": x,
                        "position": "absolute",
                        "font-weight": "bold",
                        "color": "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
                    });
                    $("body").append($i);
                    $i.animate({
                        "top": y - 180,
                        "opacity": 0
                    },
                        1500,
                        function () {
                            $i.remove();
                        });
                });
            });
        </script>

        <!--鼠标特效-->
        <script src="https://blog-static.cnblogs.com/files/zouwangblog/mouse-click.js"></script>
        <canvas width="1777" height="841"
            style="position: fixed; left: 0px; top: 0px; z-index: 2147483647; pointer-events: none;"></canvas>
        <!--鼠标特效 end-->

        <!--雪花特效1&12月自动添加-->

        <div class="Snow">
            <canvas id="Snow"></canvas>
        </div>
        <script src="https://blog-static.cnblogs.com/files/zouwangblog/xue.js"></script>

        <!--顶部加载条-->
        <link rel="stylesheet" href="https://blog-static.cnblogs.com/files/zouwangblog/nprogress.css">
        <script src="https://blog-static.cnblogs.com/files/zouwangblog/nprogress.js"></script>
        <script>
            NProgress.start();
            NProgress.done();
        </script>
    </div>

    <input type="hidden" id="antiforgery_token"
        value="CfDJ8CE1tT_puDpHgc1zrpsLVP_YhI_1Yud1Qbs4mtgASlxMqSpcPGMVWgmKWaa5qoeiJZc_9pKJwiPkq0N_xI57h8pmb8svxaAVZfJn7o2oLbMG_jgoymFuAXXjYmyC7St0_ZWKU6D5ALojwtPKO6pnb9Q" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M95P3TTWJZ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-M95P3TTWJZ');
    </script>
    <script defer src="https://hm.baidu.com/hm.js?866c9be12d4a814454792b1fd0fed295"></script>
</body>